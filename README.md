# Weather Radar

### Важно:

1. Backend:

   - Убедитесь, что у вас установлен Python 3.x
   - Сервер по умолчанию запускается на `http://localhost:8000`

2. Client:

   - Требуется Node.js >=18 (рекомендуется LTS версия)
   - В режиме разработки клиент запускается на `http://localhost:5173`
   - После сборки файлы можно развернуть на любом веб-сервере

Если у вас возникнут проблемы с запуском, проверьте:

- Наличие всех необходимых зависимостей
- Соответствие версий Python и Node.js
- Наличие всех необходимых переменных окружения

### Запуск Backend (папка api)

1. **Установка зависимостей:**

   ```bash
   cd api
   python -m venv .venv  # Создание виртуального окружения
   .venv\Scripts\activate  # Активация виртуального окружения (Windows)
   pip install -r requirements.txt  # Установка зависимостей
   ```

2. **Запуск сервера:**
   - Для Windows:
     ```bash
     start.bat
     ```
   - Для Linux/Mac:
     ```bash
     ./start.sh
     ```
   - Или вручную:
     ```bash
     python main.py
     ```

### Сборка и запуск клиента (папка client)

1. **Установка зависимостей:**

   ```bash
   cd client
   npm install
   ```

2. **Запуск в режиме разработки:**

   ```bash
   npm run dev
   ```

3. **Сборка для продакшена:**
   ```bash
   npm run build
   ```
   После сборки файлы будут находиться в папке `dist/`

### Настройка Apache Server

1. **Установка Apache:**

   - Установите Apache HTTP Server (если еще не установлен)
   - Убедитесь, что установлены модули:
     - `mod_proxy`
     - `mod_proxy_http`
     - `mod_deflate`
     - `mod_headers`

2. **Настройка конфигурации:**

   - Скопируйте содержимое файла `apache/apache.conf` в конфигурацию Apache
   - Замените следующие значения в конфигурации:
     - `your-domain` на ваш домен
     - `path-to-static` на путь к собранной версии клиента (папка `client/dist`)
     - `api-weather.your-domain` на поддомен для API

3. **Настройка путей:**

   ```apache
   # Для клиентской части
   DocumentRoot /путь/к/вашему/проекту/client/dist

   # Для API
   ProxyPass / http://127.0.0.1:8000/
   ```

### Порядок запуска

1. **Запуск Backend:**

   ```bash
   cd api
   python main.py
   ```

   Backend должен быть запущен на порту 8000

2. **Сборка клиента:**

   ```bash
   cd client
   npm run build
   ```

3. **Запуск Apache:**
   - Windows:
     ```bash
     httpd.exe -k start
     ```
   - Linux:
     ```bash
     sudo systemctl start apache2
     ```

### Проверка работы

1. **Проверка клиентской части:**

   - Откройте в браузере `http://your-domain`
   - Должна загрузиться веб-страница

2. **Проверка API:**
   - Откройте в браузере `http://api-weather.your-domain`
   - Должны работать все API-эндпоинты

### Дополнительные настройки

1. **SSL/HTTPS:**

   - Для безопасного соединения рекомендуется настроить SSL
   - Добавьте SSL-сертификат и настройте виртуальный хост для порта 443

2. **Оптимизация:**

   - Конфигурация уже включает сжатие (gzip) для статических файлов
   - Настроено кэширование для статических ресурсов

3. **Безопасность:**
   - Настройте правильные права доступа к директориям
   - Ограничьте доступ к служебным директориям
   - Настройте CORS для API

### Возможные проблемы и решения

1. **Ошибка 403 Forbidden:**

   - Проверьте права доступа к директориям
   - Убедитесь, что Apache имеет доступ к файлам

2. **API не отвечает:**

   - Проверьте, запущен ли backend
   - Проверьте настройки прокси в Apache
   - Проверьте, не блокирует ли брандмауэр порт 8000

3. **Статические файлы не загружаются:**
   - Проверьте путь к `DocumentRoot`
   - Убедитесь, что сборка клиента прошла успешно
   - Проверьте права доступа к файлам

Для отладки проблем можно проверить логи Apache:

- Windows: `logs/error.log`
- Linux: `/var/log/apache2/error.log`
